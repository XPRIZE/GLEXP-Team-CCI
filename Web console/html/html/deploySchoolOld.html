<html>
<head>
  <title>Deploy School</title>
  <link rel="stylesheet" href="../includes/webix/webix.css" type="text/css">
  <script src="../includes/webix/webix.js"></script>
  <script src="../includes/sha512.js"></script>
  <script src="../includes/jquery.js"></script>
  <link rel="styleSheet" href="../css/webixPersonalModifications.css"/>
  <style>
    body {
      background-color: grey;
    }

    .furtherInfo {
      height: 0px !important;
    }
  </style>
</head>
<body>
</body>
</html>
<script>
  var deploymentOptionExplanationHTML = {
    offline: "<h2>Deploy for offline use</h2><p>Use this option if you want to deploy your school for an offline mobile or desktop broswer application. LIMITATION:...</p>",
    remote: "<h2>Deploy for this server</h2><p>For testing purposes only</p>",
    local: "<h2>Deploy for offline use</h2><p>Use this option to deploy on a different server. MUST BE LAMP SERVER</p>",
    prompt: "<h2>Select an option.</h2><p>Further information will be given</p>",
  }

  var header = {
    view: "toolbar",
    height: 55,
    autoWidth: true,
    cols: [
      {
        view: "button", value: "Home", width: 80, on: {
        onItemClick: function () {
          window.location.href = "../index.php";
        }
      }
      },
      {
        view: "button", value: "Help", width: 80, on: {
        onItemClick: function () {
          window.location.href = "help.php";
        }
      }
      },
      {
        view: "label",
        template: "<p class='toolbarCenterLabel'>Deploy school</p>"
      },
      {width: 80},
      {
        view: "button", value: "Logout", width: 80, on: {
        onItemClick: function () {
          window.location.href = "../logout.php";
        }
      }
      }
    ]
  };

  var select = {
    header: "Select",
    body: {
      view: "list",
      id: "schoolList",
      select:"multiselect",
      template: "#ID#: #name#",
      data: [],
    }
  }

  var tweak = {
    header: "Tweak",
    body: {
      rows: [
        {
          view:"form",
          id:"tweakForm",
          elements:[
            { view:"text", label:"App Name", placeholder: "School"},
            { view:"text", label:"App Icon", placeholder: "School"},
            {
              cols: [
                {
                  view: "uploader",
                  id: "reuploadBook",
                  view: "uploader",
                  width: 200,
                  value: "Reupload",
                  upload: "../ajax/upload/uploadSchoolIcon.php",
                  on: {
                    onUploadComplete: function () {
                      webix.message("Upload complete!");
                      window.location.href = window.location.href;
                    }
                  },
                },
                {
                  template:"<img class='icon' src='Test School/appIcon.png' />",
                }
              ]
            },
          ]
        }
      ]
    }
  }

  var deploy = {
    id: "deployCont",
    header: "Deploy",
    body: {
      cols: [
        {
          rows: [
            {value: "Offline", view: "button", disabled: true, height: 100, width: 100},
            {},
            {value: "Remote", view: "button", disabled: true, height: 100, width: 100},
            {},
            {value: "Local", view: "button", disabled: true, height: 100, width: 100},
            {height:60}
          ]
        },
        {
          rows: [
            {id: "furtherInfo", template: "<h2>Select an option first</h2>"},
            {
              cols: [
                {},
                {value: "Deploy", css:"submit", view: "button", height:60, disabled: true,},
              ]
            }
          ]
        }
      ],
    }
  }

  webix.ui({
    type: "space",
    rows: [
      header,
      {
        view: "accordion",
        height: "100%",
        cols: [
          select,
          tweak,
          deploy,
        ]
      },
    ]
  });

  function loadSchools() {
    $.ajax("../ajax/get/getSchools.php").done(
        function (ret) {
          ret = window.eval(ret);
          console.log(ret);
          for (var i = 0; i < ret.length; i++) {
            $$("schoolList").add({ID: ret[i].ID, name: ret[i].name}, i);
          }
          $$("schoolList").refresh();
        }
    );
  }
  loadSchools();
</script>













